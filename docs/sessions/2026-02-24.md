# Session Log â€” 2026-02-24

## Summary

Initial build of the What Changed Chrome extension from concept to published repo.

## What was done

### Extension core (v0.1.0)
- Scaffolded full Manifest V3 Chrome extension with TypeScript + esbuild
- Content script: Readability.js extraction, DOM stability detection, SPA navigation handling, login page detection, noise filtering
- Background service worker: URL normalization (strips tracking params), SHA-256 content deduplication, IndexedDB storage via idb, significance scoring, dynamic feed detection, badge management
- Popup: shows change count, status, and button to open side panel
- Side panel: renders word-level diffs (jsdiff diffWords) with all/added/removed filter toggles
- Settings page: retention period (30d-1yr), significance threshold slider, domain blocklist, clear all data, storage stats

### Assets and distribution
- Icon generation script: SVG rendered to 16/32/48/128px PNGs via sharp
- Icon design: dark rounded square with white delta symbol and blue accent dot
- Landing page (docs/index.html): hero, live diff demo, how-it-works, features, use cases, privacy section. Fully responsive.
- Privacy policy (docs/privacy.html): covers data collection, storage, permissions, user rights. Required for CWS submission.
- README with architecture section, key decisions, tech stack, development instructions

### Infrastructure
- GitHub repo: https://github.com/Surfrrosa/what-changed (public, MIT license)
- GitHub Pages ready from docs/ folder
- CLAUDE.md for AI session context
- Dependencies pinned to exact versions

## Architecture decisions

- **Text diffing over DOM diffing**: avoids false positives from CSS/layout changes. A full site redesign with identical copy produces zero diff.
- **Readability extraction at capture time**: keeps snapshots at ~5 KB text vs ~200 KB raw HTML. Diffs are inherently clean.
- **SHA-256 deduplication**: ~70% of revisits find unchanged content. Skips redundant storage entirely.
- **Background renders diff HTML**: side panel is a thin renderer with no lib dependencies. Simplifies bundle and avoids duplicating jsdiff.
- **IIFE bundles everywhere**: avoids ES module compatibility issues across extension contexts (content scripts don't support ES modules).

## Bundle sizes

- content.js: 88 KB (mostly Readability.js)
- background.js: 40 KB
- popup + sidepanel + options: ~7 KB combined
- Total extension: ~150 KB

## Storage estimates

- Average snapshot: ~5 KB text, ~2-3 KB compressed
- With deduplication: ~80-100 KB/day for 100 pages
- 90-day retention default: ~9 MB total

## Next steps

- Load in Chrome and manual test
- Take CWS screenshots (1280x800)
- Register CWS developer account ($5)
- Submit to Chrome Web Store (expect 3-7 day review for `<all_urls>`)
- Enable GitHub Pages from docs/ folder
- Consider Firefox Add-ons cross-listing
- Consider custom domain (.dev)
